---

- name: Install MySQL packages
  apt:
    name: '{{ item }}'
    update_cache: yes
    state: present
  with_items:
  - mariadb-server
  - mariadb-client
  tags:
  - mysql
  - packages

- name: Install MySQL dev packages
  apt:
    name: '{{ item }}'
    update_cache: yes
    state: present
  with_items:
  - default-libmysqlclient-dev
  tags:
  - mysql
  - packages
  when: mysql_install_libclient

- name: MySQL is started
  service:
    name: mysql
    state: started
  tags:
  - mysql
  - services

- name: apg package is installed
  apt:
    name: apg
    state: present
  tags:
  - mysql
  - packages
