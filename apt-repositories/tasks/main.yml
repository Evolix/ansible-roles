---

- name: Fail if distribution is not supported
  fail:
    msg: "Error: '{{ ansible_os_family }} {{ ansible_distribution_release }}' is not a supported distribution."
  when:
  - ansible_distribution_release != "jessie"
  - ansible_distribution_release != "stretch"

- name: Add components to basic repositories
  include: basics_components.yml
  when: apt_repositories_change_basics_components

- name: Install APT Backports repository
  include: backports.yml
  when: apt_repositories_install_backports

- name: Install Evolix Public APT repository
  include: evolix_public.yml
  when: apt_repositories_install_evolix_public

- name: Intermediate flush of handlers
  meta: flush_handlers
