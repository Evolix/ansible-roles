---

# HAProxy

- name: "Copy HAProxy static elements for {{ site }}"
  copy:
    src: "templates/boost-sites/{{ site }}/haproxy/static/"
    dest: "/etc/haproxy/sites/{{ site }}/"
    owner: root
    group: root
    mode: "0644"
  tags:
    - haproxy
    - config
    - update-config

# Varnish

- name: "Copy Varnish custom VCL for {{ site }}"
  template:
    src: "templates/boost-sites/{{ site }}/varnish/default.vcl.j2"
    dest: "/etc/varnish/sites/{{ site }}.vcl"
    owner: root
    group: root
    mode: "0644"
  notify: reload varnish
  tags:
    - varnish
    - config
    - update-config
