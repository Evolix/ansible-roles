---

- name: Include java8 role
  include_role:
    name: java8

- name: Add jenkins GPG key
  apt_key:
    # url: https://jenkins-ci.org/debian/jenkins-ci.org.key
    data: "{{ lookup('file', 'jenkins.key') }}"

- name: Add jenkins APT repository
  apt_repository:
    repo: deb http://pkg.jenkins-ci.org/debian-stable binary/
    filename: jenkins
    update_cache: yes

- name: Install Jenkins
  apt:
    name: jenkins

- name: Change Jenkins port
  replace:
    name: /etc/default/jenkins
    regexp: "^HTTP_PORT=.*$"
    replace: "HTTP_PORT=8081"
  notify: Restart Jenkins
