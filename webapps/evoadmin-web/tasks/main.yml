---

- name: "Ensure that evoadmin_contact_email is defined"
  fail:
    msg: Please configure var evoadmin_contact_email
  when: evoadmin_contact_email is none or evoadmin_contact_email | length == 0

- import_tasks: packages.yml

- import_tasks: user.yml

- import_tasks: config.yml

- import_tasks: ssl.yml

- import_tasks: web.yml

- import_tasks: ftp.yml

- name: enable evoadmin-web link in default site index
  blockinfile:
    dest: /var/www/index.html
    marker: "<!-- {mark} evoadmin-web section -->"
    block: |
      <li><a href="https://{{ evoadmin_host }}">Interface admin web (EvoAdmin-web)</a></li>
